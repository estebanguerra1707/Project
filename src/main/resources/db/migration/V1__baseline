--
-- EnterpriseDB database dump
--

-- Dumped from database version 17.5.0
-- Dumped by pg_dump version 17.5.0

-- Started on 2025-08-20 11:25:04

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SET edb_redwood_date = off;
SET default_with_rowids = off;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;
SET edb_data_redaction = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 834 (class 1259 OID 17076)
-- Name: business_type; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.business_type (
    id bigint NOT NULL,
    name character varying(255) NOT NULL,
    active boolean DEFAULT true,
    code character varying(30)
);


ALTER TABLE public.business_type OWNER TO enterprisedb;

--
-- TOC entry 833 (class 1259 OID 17075)
-- Name: business_type_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

CREATE SEQUENCE public.business_type_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.business_type_id_seq OWNER TO enterprisedb;

--
-- TOC entry 7462 (class 0 OID 0)
-- Dependencies: 833
-- Name: business_type_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: enterprisedb
--

ALTER SEQUENCE public.business_type_id_seq OWNED BY public.business_type.id;


--
-- TOC entry 812 (class 1259 OID 16516)
-- Name: cliente; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.cliente (
    id bigint NOT NULL,
    active boolean,
    contact character varying(255),
    email character varying(255),
    name character varying(255),
    phone character varying(255)
);


ALTER TABLE public.cliente OWNER TO enterprisedb;

--
-- TOC entry 811 (class 1259 OID 16515)
-- Name: cliente_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

CREATE SEQUENCE public.cliente_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.cliente_id_seq OWNER TO enterprisedb;

--
-- TOC entry 7463 (class 0 OID 0)
-- Dependencies: 811
-- Name: cliente_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: enterprisedb
--

ALTER SEQUENCE public.cliente_id_seq OWNED BY public.cliente.id;


--
-- TOC entry 825 (class 1259 OID 16813)
-- Name: cliente_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

CREATE SEQUENCE public.cliente_seq
    START WITH 1
    INCREMENT BY 50
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.cliente_seq OWNER TO enterprisedb;

--
-- TOC entry 818 (class 1259 OID 16548)
-- Name: compra; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.compra (
    id bigint NOT NULL,
    supplier_id bigint,
    purchase_date timestamp without time zone DEFAULT current_date,
    total_amount numeric(38,2) DEFAULT 0,
    active boolean,
    usuario_id bigint,
    branch_id bigint,
    amount_paid numeric(10,2),
    change_amount numeric(10,2),
    payment_method_id bigint
);


ALTER TABLE public.compra OWNER TO enterprisedb;

--
-- TOC entry 817 (class 1259 OID 16547)
-- Name: compra_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

CREATE SEQUENCE public.compra_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.compra_id_seq OWNER TO enterprisedb;

--
-- TOC entry 7464 (class 0 OID 0)
-- Dependencies: 817
-- Name: compra_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: enterprisedb
--

ALTER SEQUENCE public.compra_id_seq OWNED BY public.compra.id;


--
-- TOC entry 826 (class 1259 OID 16814)
-- Name: compra_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

CREATE SEQUENCE public.compra_seq
    START WITH 1
    INCREMENT BY 50
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.compra_seq OWNER TO enterprisedb;

--
-- TOC entry 820 (class 1259 OID 16562)
-- Name: detalle_compra; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.detalle_compra (
    id bigint NOT NULL,
    product_id bigint,
    quantity integer NOT NULL,
    unit_price numeric(38,2) NOT NULL,
    subtotal numeric(38,2) NOT NULL,
    active boolean,
    purchase_id bigint
);


ALTER TABLE public.detalle_compra OWNER TO enterprisedb;

--
-- TOC entry 819 (class 1259 OID 16561)
-- Name: detalle_compra_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

CREATE SEQUENCE public.detalle_compra_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.detalle_compra_id_seq OWNER TO enterprisedb;

--
-- TOC entry 7465 (class 0 OID 0)
-- Dependencies: 819
-- Name: detalle_compra_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: enterprisedb
--

ALTER SEQUENCE public.detalle_compra_id_seq OWNED BY public.detalle_compra.id;


--
-- TOC entry 827 (class 1259 OID 16815)
-- Name: detalle_compra_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

CREATE SEQUENCE public.detalle_compra_seq
    START WITH 1
    INCREMENT BY 50
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.detalle_compra_seq OWNER TO enterprisedb;

--
-- TOC entry 868 (class 1259 OID 17787)
-- Name: detalle_devolucion_compras; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.detalle_devolucion_compras (
    id bigint NOT NULL,
    producto_id bigint,
    cantidad_devuelta integer NOT NULL,
    precio_compra numeric(19,2) NOT NULL,
    detalle_compra_id bigint,
    devolucion_id bigint NOT NULL
);


ALTER TABLE public.detalle_devolucion_compras OWNER TO enterprisedb;

--
-- TOC entry 867 (class 1259 OID 17786)
-- Name: detalle_devolucion_compras_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

ALTER TABLE public.detalle_devolucion_compras ALTER COLUMN id ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.detalle_devolucion_compras_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 864 (class 1259 OID 17745)
-- Name: detalle_devolucion_ventas; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.detalle_devolucion_ventas (
    id bigint NOT NULL,
    devolucion_id bigint NOT NULL,
    producto_id bigint NOT NULL,
    detalle_venta_id bigint NOT NULL,
    cantidad_devuelta integer NOT NULL,
    precio_unitario numeric(10,2) NOT NULL
);


ALTER TABLE public.detalle_devolucion_ventas OWNER TO enterprisedb;

--
-- TOC entry 863 (class 1259 OID 17744)
-- Name: detalle_devolucion_ventas_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

ALTER TABLE public.detalle_devolucion_ventas ALTER COLUMN id ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.detalle_devolucion_ventas_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 824 (class 1259 OID 16593)
-- Name: detalle_venta; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.detalle_venta (
    id bigint NOT NULL,
    sale_id bigint,
    product_id bigint,
    quantity integer NOT NULL,
    active boolean,
    sub_total numeric(38,2),
    unit_price numeric(38,2)
);


ALTER TABLE public.detalle_venta OWNER TO enterprisedb;

--
-- TOC entry 823 (class 1259 OID 16592)
-- Name: detalle_venta_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

CREATE SEQUENCE public.detalle_venta_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.detalle_venta_id_seq OWNER TO enterprisedb;

--
-- TOC entry 7466 (class 0 OID 0)
-- Dependencies: 823
-- Name: detalle_venta_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: enterprisedb
--

ALTER SEQUENCE public.detalle_venta_id_seq OWNED BY public.detalle_venta.id;


--
-- TOC entry 828 (class 1259 OID 16816)
-- Name: detalle_venta_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

CREATE SEQUENCE public.detalle_venta_seq
    START WITH 1
    INCREMENT BY 50
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.detalle_venta_seq OWNER TO enterprisedb;

--
-- TOC entry 866 (class 1259 OID 17766)
-- Name: devolucion_compras; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.devolucion_compras (
    id bigint NOT NULL,
    fecha timestamp(3) without time zone NOT NULL,
    motivo character varying(255),
    tipo_devolucion character varying(50),
    monto_devuelto numeric(19,2),
    compra_id bigint NOT NULL,
    usuario_id bigint NOT NULL,
    branch_id bigint NOT NULL
);


ALTER TABLE public.devolucion_compras OWNER TO enterprisedb;

--
-- TOC entry 865 (class 1259 OID 17765)
-- Name: devolucion_compras_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

ALTER TABLE public.devolucion_compras ALTER COLUMN id ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.devolucion_compras_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 862 (class 1259 OID 17723)
-- Name: devolucion_ventas; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.devolucion_ventas (
    id bigint NOT NULL,
    venta_id bigint NOT NULL,
    branch_id bigint NOT NULL,
    usuario_id bigint NOT NULL,
    motivo character varying(255),
    fecha_devolucion timestamp(3) without time zone NOT NULL,
    tipo_devolucion character varying(20) NOT NULL,
    monto_devuelto numeric(10,2) DEFAULT 0 NOT NULL
);


ALTER TABLE public.devolucion_ventas OWNER TO enterprisedb;

--
-- TOC entry 861 (class 1259 OID 17722)
-- Name: devolucion_ventas_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

ALTER TABLE public.devolucion_ventas ALTER COLUMN id ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.devolucion_ventas_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 850 (class 1259 OID 17642)
-- Name: forma_farmaceutica; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.forma_farmaceutica (
    id bigint NOT NULL,
    nombre character varying(100) NOT NULL
);


ALTER TABLE public.forma_farmaceutica OWNER TO enterprisedb;

--
-- TOC entry 849 (class 1259 OID 17641)
-- Name: forma_farmaceutica_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

ALTER TABLE public.forma_farmaceutica ALTER COLUMN id ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.forma_farmaceutica_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 846 (class 1259 OID 17616)
-- Name: historial_movimiento; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.historial_movimiento (
    id bigint NOT NULL,
    inventario_sucursal_id bigint NOT NULL,
    movement_type character varying(50) NOT NULL,
    quantity integer NOT NULL,
    before_stock integer NOT NULL,
    new_stock integer NOT NULL,
    movement_date timestamp without time zone NOT NULL,
    reference character varying(255)
);


ALTER TABLE public.historial_movimiento OWNER TO enterprisedb;

--
-- TOC entry 845 (class 1259 OID 17615)
-- Name: historial_movimiento_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

ALTER TABLE public.historial_movimiento ALTER COLUMN id ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.historial_movimiento_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 858 (class 1259 OID 17686)
-- Name: inventario_farmacia; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.inventario_farmacia (
    id bigint NOT NULL,
    producto_id bigint,
    sucursal_id bigint,
    lote character varying(100) NOT NULL,
    fecha_caducidad timestamp without time zone NOT NULL,
    cantidad integer NOT NULL
);


ALTER TABLE public.inventario_farmacia OWNER TO enterprisedb;

--
-- TOC entry 857 (class 1259 OID 17685)
-- Name: inventario_farmacia_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

ALTER TABLE public.inventario_farmacia ALTER COLUMN id ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.inventario_farmacia_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 839 (class 1259 OID 17501)
-- Name: inventario_sucursal; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.inventario_sucursal (
    branch_id bigint NOT NULL,
    product_id bigint NOT NULL,
    stock integer DEFAULT 0,
    active boolean DEFAULT true,
    id bigint NOT NULL,
    min_stock integer DEFAULT 0,
    max_stock integer DEFAULT 0,
    last_updated_date timestamp without time zone,
    last_updated_by character varying(100),
    stock_critico boolean DEFAULT false
);


ALTER TABLE public.inventario_sucursal OWNER TO enterprisedb;

--
-- TOC entry 840 (class 1259 OID 17521)
-- Name: inventario_sucursal_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

CREATE SEQUENCE public.inventario_sucursal_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.inventario_sucursal_id_seq OWNER TO enterprisedb;

--
-- TOC entry 7467 (class 0 OID 0)
-- Dependencies: 840
-- Name: inventario_sucursal_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: enterprisedb
--

ALTER SEQUENCE public.inventario_sucursal_id_seq OWNED BY public.inventario_sucursal.id;


--
-- TOC entry 844 (class 1259 OID 17570)
-- Name: metodo_pago; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.metodo_pago (
    id bigint NOT NULL,
    name character varying(30) NOT NULL
);


ALTER TABLE public.metodo_pago OWNER TO enterprisedb;

--
-- TOC entry 848 (class 1259 OID 17629)
-- Name: password_reset_token; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.password_reset_token (
    id bigint NOT NULL,
    token character varying(255) NOT NULL,
    expiry_date timestamp without time zone NOT NULL,
    usuario_id bigint
);


ALTER TABLE public.password_reset_token OWNER TO enterprisedb;

--
-- TOC entry 847 (class 1259 OID 17628)
-- Name: password_reset_token_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

ALTER TABLE public.password_reset_token ALTER COLUMN id ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.password_reset_token_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 843 (class 1259 OID 17569)
-- Name: payment_method_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

ALTER TABLE public.metodo_pago ALTER COLUMN id ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.payment_method_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 852 (class 1259 OID 17648)
-- Name: principio_activo; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.principio_activo (
    id bigint NOT NULL,
    nombre character varying(100) NOT NULL
);


ALTER TABLE public.principio_activo OWNER TO enterprisedb;

--
-- TOC entry 851 (class 1259 OID 17647)
-- Name: principio_activo_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

ALTER TABLE public.principio_activo ALTER COLUMN id ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.principio_activo_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 836 (class 1259 OID 17252)
-- Name: product_category; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.product_category (
    id bigint NOT NULL,
    name character varying(100) NOT NULL,
    business_type_id bigint
);


ALTER TABLE public.product_category OWNER TO enterprisedb;

--
-- TOC entry 835 (class 1259 OID 17251)
-- Name: product_category_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

CREATE SEQUENCE public.product_category_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.product_category_id_seq OWNER TO enterprisedb;

--
-- TOC entry 7468 (class 0 OID 0)
-- Dependencies: 835
-- Name: product_category_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: enterprisedb
--

ALTER SEQUENCE public.product_category_id_seq OWNED BY public.product_category.id;


--
-- TOC entry 842 (class 1259 OID 17554)
-- Name: product_detail; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.product_detail (
    id bigint NOT NULL,
    product_id bigint NOT NULL,
    part_number character varying(100) NOT NULL,
    car_brand character varying(100) NOT NULL,
    car_model character varying(100),
    year_range character varying(50),
    oem_equivalent character varying(100),
    technical_description text
);


ALTER TABLE public.product_detail OWNER TO enterprisedb;

--
-- TOC entry 841 (class 1259 OID 17553)
-- Name: product_detail_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

ALTER TABLE public.product_detail ALTER COLUMN id ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.product_detail_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 816 (class 1259 OID 16534)
-- Name: producto; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.producto (
    id bigint NOT NULL,
    name character varying(255) NOT NULL,
    sku character varying(255),
    description character varying(255),
    purchase_price numeric(38,2) NOT NULL,
    creation_date timestamp without time zone DEFAULT current_date,
    active boolean,
    business_type_id bigint,
    category_id bigint,
    provider_id bigint,
    branch_id bigint,
    codigo_barras character varying(100),
    sale_price numeric(10,2)
);


ALTER TABLE public.producto OWNER TO enterprisedb;

--
-- TOC entry 856 (class 1259 OID 17660)
-- Name: producto_farmacia; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.producto_farmacia (
    id bigint NOT NULL,
    principio_activo_id bigint,
    forma_farmaceutica_id bigint,
    unidad_medida_id bigint,
    concentracion character varying(100)
);


ALTER TABLE public.producto_farmacia OWNER TO enterprisedb;

--
-- TOC entry 855 (class 1259 OID 17659)
-- Name: producto_farmacia_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

ALTER TABLE public.producto_farmacia ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.producto_farmacia_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 815 (class 1259 OID 16533)
-- Name: producto_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

CREATE SEQUENCE public.producto_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.producto_id_seq OWNER TO enterprisedb;

--
-- TOC entry 7469 (class 0 OID 0)
-- Dependencies: 815
-- Name: producto_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: enterprisedb
--

ALTER SEQUENCE public.producto_id_seq OWNED BY public.producto.id;


--
-- TOC entry 829 (class 1259 OID 16817)
-- Name: producto_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

CREATE SEQUENCE public.producto_seq
    START WITH 1
    INCREMENT BY 50
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.producto_seq OWNER TO enterprisedb;

--
-- TOC entry 810 (class 1259 OID 16509)
-- Name: proveedor; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.proveedor (
    id bigint NOT NULL,
    active boolean,
    contact character varying(255),
    name character varying(100),
    email character varying(255)
);


ALTER TABLE public.proveedor OWNER TO enterprisedb;

--
-- TOC entry 809 (class 1259 OID 16508)
-- Name: proveedor_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

CREATE SEQUENCE public.proveedor_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.proveedor_id_seq OWNER TO enterprisedb;

--
-- TOC entry 7470 (class 0 OID 0)
-- Dependencies: 809
-- Name: proveedor_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: enterprisedb
--

ALTER SEQUENCE public.proveedor_id_seq OWNED BY public.proveedor.id;


--
-- TOC entry 830 (class 1259 OID 16818)
-- Name: proveedor_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

CREATE SEQUENCE public.proveedor_seq
    START WITH 1
    INCREMENT BY 50
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.proveedor_seq OWNER TO enterprisedb;

--
-- TOC entry 860 (class 1259 OID 17702)
-- Name: proveedor_sucursal; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.proveedor_sucursal (
    id bigint NOT NULL,
    proveedor_id bigint NOT NULL,
    sucursal_id bigint NOT NULL
);


ALTER TABLE public.proveedor_sucursal OWNER TO enterprisedb;

--
-- TOC entry 859 (class 1259 OID 17701)
-- Name: proveedor_sucursal_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

ALTER TABLE public.proveedor_sucursal ALTER COLUMN id ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.proveedor_sucursal_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 838 (class 1259 OID 17483)
-- Name: sucursal; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.sucursal (
    id bigint NOT NULL,
    name character varying(100) NOT NULL,
    address character varying(255),
    active boolean DEFAULT true,
    phone character varying(20),
    business_type_id bigint,
    alerta_stock_critico boolean DEFAULT false
);


ALTER TABLE public.sucursal OWNER TO enterprisedb;

--
-- TOC entry 837 (class 1259 OID 17482)
-- Name: sucursal_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

CREATE SEQUENCE public.sucursal_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.sucursal_id_seq OWNER TO enterprisedb;

--
-- TOC entry 7471 (class 0 OID 0)
-- Dependencies: 837
-- Name: sucursal_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: enterprisedb
--

ALTER SEQUENCE public.sucursal_id_seq OWNED BY public.sucursal.id;


--
-- TOC entry 854 (class 1259 OID 17654)
-- Name: unidad_medida; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.unidad_medida (
    id bigint NOT NULL,
    unidad character varying(50) NOT NULL
);


ALTER TABLE public.unidad_medida OWNER TO enterprisedb;

--
-- TOC entry 853 (class 1259 OID 17653)
-- Name: unidad_medida_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

ALTER TABLE public.unidad_medida ALTER COLUMN id ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.unidad_medida_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 814 (class 1259 OID 16523)
-- Name: usuario; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.usuario (
    id bigint NOT NULL,
    email character varying(255) NOT NULL,
    role character varying(255) DEFAULT 'vendedor'::character varying,
    active boolean,
    password character varying(255),
    username character varying(255),
    branch_id bigint
);


ALTER TABLE public.usuario OWNER TO enterprisedb;

--
-- TOC entry 813 (class 1259 OID 16522)
-- Name: usuario_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

CREATE SEQUENCE public.usuario_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.usuario_id_seq OWNER TO enterprisedb;

--
-- TOC entry 7472 (class 0 OID 0)
-- Dependencies: 813
-- Name: usuario_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: enterprisedb
--

ALTER SEQUENCE public.usuario_id_seq OWNED BY public.usuario.id;


--
-- TOC entry 831 (class 1259 OID 16819)
-- Name: usuario_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

CREATE SEQUENCE public.usuario_seq
    START WITH 1
    INCREMENT BY 50
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.usuario_seq OWNER TO enterprisedb;

--
-- TOC entry 822 (class 1259 OID 16579)
-- Name: venta; Type: TABLE; Schema: public; Owner: enterprisedb
--

CREATE TABLE public.venta (
    id bigint NOT NULL,
    sale_date timestamp without time zone DEFAULT current_date,
    total_amount numeric(38,2) DEFAULT 0,
    active boolean,
    usuario_id bigint,
    cliente_id bigint,
    branch_id bigint,
    amount_paid numeric(10,2),
    change_amount numeric(10,2),
    payment_method_id bigint
);


ALTER TABLE public.venta OWNER TO enterprisedb;

--
-- TOC entry 821 (class 1259 OID 16578)
-- Name: venta_id_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

CREATE SEQUENCE public.venta_id_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.venta_id_seq OWNER TO enterprisedb;

--
-- TOC entry 7473 (class 0 OID 0)
-- Dependencies: 821
-- Name: venta_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: enterprisedb
--

ALTER SEQUENCE public.venta_id_seq OWNED BY public.venta.id;


--
-- TOC entry 832 (class 1259 OID 16820)
-- Name: venta_seq; Type: SEQUENCE; Schema: public; Owner: enterprisedb
--

CREATE SEQUENCE public.venta_seq
    START WITH 1
    INCREMENT BY 50
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.venta_seq OWNER TO enterprisedb;

--
-- TOC entry 7072 (class 2604 OID 17122)
-- Name: business_type id; Type: DEFAULT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.business_type ALTER COLUMN id SET DEFAULT nextval('public.business_type_id_seq'::regclass);


--
-- TOC entry 7059 (class 2604 OID 16615)
-- Name: cliente id; Type: DEFAULT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.cliente ALTER COLUMN id SET DEFAULT nextval('public.cliente_id_seq'::regclass);


--
-- TOC entry 7064 (class 2604 OID 16629)
-- Name: compra id; Type: DEFAULT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.compra ALTER COLUMN id SET DEFAULT nextval('public.compra_id_seq'::regclass);


--
-- TOC entry 7067 (class 2604 OID 16656)
-- Name: detalle_compra id; Type: DEFAULT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.detalle_compra ALTER COLUMN id SET DEFAULT nextval('public.detalle_compra_id_seq'::regclass);


--
-- TOC entry 7071 (class 2604 OID 16689)
-- Name: detalle_venta id; Type: DEFAULT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.detalle_venta ALTER COLUMN id SET DEFAULT nextval('public.detalle_venta_id_seq'::regclass);


--
-- TOC entry 7080 (class 2604 OID 17522)
-- Name: inventario_sucursal id; Type: DEFAULT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.inventario_sucursal ALTER COLUMN id SET DEFAULT nextval('public.inventario_sucursal_id_seq'::regclass);


--
-- TOC entry 7074 (class 2604 OID 17269)
-- Name: product_category id; Type: DEFAULT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.product_category ALTER COLUMN id SET DEFAULT nextval('public.product_category_id_seq'::regclass);


--
-- TOC entry 7062 (class 2604 OID 16722)
-- Name: producto id; Type: DEFAULT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.producto ALTER COLUMN id SET DEFAULT nextval('public.producto_id_seq'::regclass);


--
-- TOC entry 7058 (class 2604 OID 16759)
-- Name: proveedor id; Type: DEFAULT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.proveedor ALTER COLUMN id SET DEFAULT nextval('public.proveedor_id_seq'::regclass);


--
-- TOC entry 7075 (class 2604 OID 17530)
-- Name: sucursal id; Type: DEFAULT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.sucursal ALTER COLUMN id SET DEFAULT nextval('public.sucursal_id_seq'::regclass);


--
-- TOC entry 7060 (class 2604 OID 16773)
-- Name: usuario id; Type: DEFAULT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.usuario ALTER COLUMN id SET DEFAULT nextval('public.usuario_id_seq'::regclass);


--
-- TOC entry 7068 (class 2604 OID 16786)
-- Name: venta id; Type: DEFAULT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.venta ALTER COLUMN id SET DEFAULT nextval('public.venta_id_seq'::regclass);


--
-- TOC entry 7109 (class 2606 OID 17141)
-- Name: business_type business_type_name_key; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.business_type
    ADD CONSTRAINT business_type_name_key UNIQUE (name);


--
-- TOC entry 7111 (class 2606 OID 17124)
-- Name: business_type business_type_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.business_type
    ADD CONSTRAINT business_type_pkey PRIMARY KEY (id);


--
-- TOC entry 7088 (class 2606 OID 16617)
-- Name: cliente cliente_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.cliente
    ADD CONSTRAINT cliente_pkey PRIMARY KEY (id);


--
-- TOC entry 7101 (class 2606 OID 16631)
-- Name: compra compra_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.compra
    ADD CONSTRAINT compra_pkey PRIMARY KEY (id);


--
-- TOC entry 7103 (class 2606 OID 16658)
-- Name: detalle_compra detalle_compra_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.detalle_compra
    ADD CONSTRAINT detalle_compra_pkey PRIMARY KEY (id);


--
-- TOC entry 7155 (class 2606 OID 17791)
-- Name: detalle_devolucion_compras detalle_devolucion_compras_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.detalle_devolucion_compras
    ADD CONSTRAINT detalle_devolucion_compras_pkey PRIMARY KEY (id);


--
-- TOC entry 7151 (class 2606 OID 17749)
-- Name: detalle_devolucion_ventas detalle_devolucion_ventas_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.detalle_devolucion_ventas
    ADD CONSTRAINT detalle_devolucion_ventas_pkey PRIMARY KEY (id);


--
-- TOC entry 7107 (class 2606 OID 16691)
-- Name: detalle_venta detalle_venta_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.detalle_venta
    ADD CONSTRAINT detalle_venta_pkey PRIMARY KEY (id);


--
-- TOC entry 7153 (class 2606 OID 17770)
-- Name: devolucion_compras devolucion_compras_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.devolucion_compras
    ADD CONSTRAINT devolucion_compras_pkey PRIMARY KEY (id);


--
-- TOC entry 7149 (class 2606 OID 17728)
-- Name: devolucion_ventas devolucion_ventas_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.devolucion_ventas
    ADD CONSTRAINT devolucion_ventas_pkey PRIMARY KEY (id);


--
-- TOC entry 7135 (class 2606 OID 17646)
-- Name: forma_farmaceutica forma_farmaceutica_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.forma_farmaceutica
    ADD CONSTRAINT forma_farmaceutica_pkey PRIMARY KEY (id);


--
-- TOC entry 7129 (class 2606 OID 17620)
-- Name: historial_movimiento historial_movimiento_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.historial_movimiento
    ADD CONSTRAINT historial_movimiento_pkey PRIMARY KEY (id);


--
-- TOC entry 7143 (class 2606 OID 17690)
-- Name: inventario_farmacia inventario_farmacia_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.inventario_farmacia
    ADD CONSTRAINT inventario_farmacia_pkey PRIMARY KEY (id);


--
-- TOC entry 7117 (class 2606 OID 17524)
-- Name: inventario_sucursal inventario_sucursal_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.inventario_sucursal
    ADD CONSTRAINT inventario_sucursal_pkey PRIMARY KEY (id);


--
-- TOC entry 7131 (class 2606 OID 17633)
-- Name: password_reset_token password_reset_token_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.password_reset_token
    ADD CONSTRAINT password_reset_token_pkey PRIMARY KEY (id);


--
-- TOC entry 7133 (class 2606 OID 17635)
-- Name: password_reset_token password_reset_token_usuario_id_key; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.password_reset_token
    ADD CONSTRAINT password_reset_token_usuario_id_key UNIQUE (usuario_id);


--
-- TOC entry 7125 (class 2606 OID 17576)
-- Name: metodo_pago payment_method_name_key; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.metodo_pago
    ADD CONSTRAINT payment_method_name_key UNIQUE (name);


--
-- TOC entry 7127 (class 2606 OID 17574)
-- Name: metodo_pago payment_method_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.metodo_pago
    ADD CONSTRAINT payment_method_pkey PRIMARY KEY (id);


--
-- TOC entry 7137 (class 2606 OID 17652)
-- Name: principio_activo principio_activo_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.principio_activo
    ADD CONSTRAINT principio_activo_pkey PRIMARY KEY (id);


--
-- TOC entry 7113 (class 2606 OID 17271)
-- Name: product_category product_category_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.product_category
    ADD CONSTRAINT product_category_pkey PRIMARY KEY (id);


--
-- TOC entry 7121 (class 2606 OID 17560)
-- Name: product_detail product_detail_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.product_detail
    ADD CONSTRAINT product_detail_pkey PRIMARY KEY (id);


--
-- TOC entry 7123 (class 2606 OID 17562)
-- Name: product_detail product_detail_product_id_key; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.product_detail
    ADD CONSTRAINT product_detail_product_id_key UNIQUE (product_id);


--
-- TOC entry 7095 (class 2606 OID 17720)
-- Name: producto producto_codigo_barras_key; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.producto
    ADD CONSTRAINT producto_codigo_barras_key UNIQUE (codigo_barras);


--
-- TOC entry 7141 (class 2606 OID 17664)
-- Name: producto_farmacia producto_farmacia_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.producto_farmacia
    ADD CONSTRAINT producto_farmacia_pkey PRIMARY KEY (id);


--
-- TOC entry 7097 (class 2606 OID 16724)
-- Name: producto producto_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.producto
    ADD CONSTRAINT producto_pkey PRIMARY KEY (id);


--
-- TOC entry 7099 (class 2606 OID 16758)
-- Name: producto producto_sku_key; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.producto
    ADD CONSTRAINT producto_sku_key UNIQUE (sku);


--
-- TOC entry 7086 (class 2606 OID 16761)
-- Name: proveedor proveedor_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.proveedor
    ADD CONSTRAINT proveedor_pkey PRIMARY KEY (id);


--
-- TOC entry 7145 (class 2606 OID 17706)
-- Name: proveedor_sucursal proveedor_sucursal_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.proveedor_sucursal
    ADD CONSTRAINT proveedor_sucursal_pkey PRIMARY KEY (id);


--
-- TOC entry 7115 (class 2606 OID 17532)
-- Name: sucursal sucursal_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.sucursal
    ADD CONSTRAINT sucursal_pkey PRIMARY KEY (id);


--
-- TOC entry 7147 (class 2606 OID 17708)
-- Name: proveedor_sucursal uc_proveedor_sucursal; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.proveedor_sucursal
    ADD CONSTRAINT uc_proveedor_sucursal UNIQUE (proveedor_id, sucursal_id);


--
-- TOC entry 7119 (class 2606 OID 17510)
-- Name: inventario_sucursal uc_sucursal_producto; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.inventario_sucursal
    ADD CONSTRAINT uc_sucursal_producto UNIQUE (branch_id, product_id);


--
-- TOC entry 7139 (class 2606 OID 17658)
-- Name: unidad_medida unidad_medida_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.unidad_medida
    ADD CONSTRAINT unidad_medida_pkey PRIMARY KEY (id);


--
-- TOC entry 7090 (class 2606 OID 16782)
-- Name: usuario usuario_email_key; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.usuario
    ADD CONSTRAINT usuario_email_key UNIQUE (email);


--
-- TOC entry 7092 (class 2606 OID 16775)
-- Name: usuario usuario_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.usuario
    ADD CONSTRAINT usuario_pkey PRIMARY KEY (id);


--
-- TOC entry 7105 (class 2606 OID 16788)
-- Name: venta venta_pkey; Type: CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.venta
    ADD CONSTRAINT venta_pkey PRIMARY KEY (id);


--
-- TOC entry 7093 (class 1259 OID 17721)
-- Name: idx_producto_codigo_barras; Type: INDEX; Schema: public; Owner: enterprisedb
--

CREATE INDEX idx_producto_codigo_barras ON public.producto USING btree (codigo_barras);


--
-- TOC entry 7165 (class 2606 OID 17582)
-- Name: compra compra_payment_method_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.compra
    ADD CONSTRAINT compra_payment_method_id_fkey FOREIGN KEY (payment_method_id) REFERENCES public.metodo_pago(id);


--
-- TOC entry 7162 (class 2606 OID 16762)
-- Name: compra compra_proveedor_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.compra
    ADD CONSTRAINT compra_proveedor_id_fkey FOREIGN KEY (supplier_id) REFERENCES public.proveedor(id) ON DELETE SET NULL;


--
-- TOC entry 7166 (class 2606 OID 16725)
-- Name: detalle_compra detalle_compra_producto_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.detalle_compra
    ADD CONSTRAINT detalle_compra_producto_id_fkey FOREIGN KEY (product_id) REFERENCES public.producto(id) ON DELETE SET NULL;


--
-- TOC entry 7171 (class 2606 OID 16730)
-- Name: detalle_venta detalle_venta_producto_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.detalle_venta
    ADD CONSTRAINT detalle_venta_producto_id_fkey FOREIGN KEY (product_id) REFERENCES public.producto(id) ON DELETE SET NULL;


--
-- TOC entry 7172 (class 2606 OID 16789)
-- Name: detalle_venta detalle_venta_venta_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.detalle_venta
    ADD CONSTRAINT detalle_venta_venta_id_fkey FOREIGN KEY (sale_id) REFERENCES public.venta(id) ON DELETE SET NULL;


--
-- TOC entry 7173 (class 2606 OID 17276)
-- Name: product_category fk_category_business_type; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.product_category
    ADD CONSTRAINT fk_category_business_type FOREIGN KEY (business_type_id) REFERENCES public.business_type(id);


--
-- TOC entry 7164 (class 2606 OID 17533)
-- Name: compra fk_compra_sucursal; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.compra
    ADD CONSTRAINT fk_compra_sucursal FOREIGN KEY (branch_id) REFERENCES public.sucursal(id);


--
-- TOC entry 7163 (class 2606 OID 16972)
-- Name: compra fk_compra_usuario; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.compra
    ADD CONSTRAINT fk_compra_usuario FOREIGN KEY (usuario_id) REFERENCES public.usuario(id);


--
-- TOC entry 7197 (class 2606 OID 17797)
-- Name: detalle_devolucion_compras fk_detalle_compra; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.detalle_devolucion_compras
    ADD CONSTRAINT fk_detalle_compra FOREIGN KEY (detalle_compra_id) REFERENCES public.detalle_compra(id);


--
-- TOC entry 7191 (class 2606 OID 17750)
-- Name: detalle_devolucion_ventas fk_detalle_devolucion; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.detalle_devolucion_ventas
    ADD CONSTRAINT fk_detalle_devolucion FOREIGN KEY (devolucion_id) REFERENCES public.devolucion_ventas(id);


--
-- TOC entry 7198 (class 2606 OID 17792)
-- Name: detalle_devolucion_compras fk_detalle_devolucion_compra; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.detalle_devolucion_compras
    ADD CONSTRAINT fk_detalle_devolucion_compra FOREIGN KEY (devolucion_id) REFERENCES public.devolucion_compras(id);


--
-- TOC entry 7192 (class 2606 OID 17760)
-- Name: detalle_devolucion_ventas fk_detalle_devolucion_detalle_venta; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.detalle_devolucion_ventas
    ADD CONSTRAINT fk_detalle_devolucion_detalle_venta FOREIGN KEY (detalle_venta_id) REFERENCES public.detalle_venta(id);


--
-- TOC entry 7193 (class 2606 OID 17755)
-- Name: detalle_devolucion_ventas fk_detalle_devolucion_producto; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.detalle_devolucion_ventas
    ADD CONSTRAINT fk_detalle_devolucion_producto FOREIGN KEY (producto_id) REFERENCES public.producto(id);


--
-- TOC entry 7199 (class 2606 OID 17802)
-- Name: detalle_devolucion_compras fk_detalle_producto; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.detalle_devolucion_compras
    ADD CONSTRAINT fk_detalle_producto FOREIGN KEY (producto_id) REFERENCES public.producto(id);


--
-- TOC entry 7194 (class 2606 OID 17781)
-- Name: devolucion_compras fk_devolucion_branch; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.devolucion_compras
    ADD CONSTRAINT fk_devolucion_branch FOREIGN KEY (branch_id) REFERENCES public.sucursal(id);


--
-- TOC entry 7195 (class 2606 OID 17771)
-- Name: devolucion_compras fk_devolucion_compra; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.devolucion_compras
    ADD CONSTRAINT fk_devolucion_compra FOREIGN KEY (compra_id) REFERENCES public.compra(id);


--
-- TOC entry 7188 (class 2606 OID 17734)
-- Name: devolucion_ventas fk_devolucion_sucursal; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.devolucion_ventas
    ADD CONSTRAINT fk_devolucion_sucursal FOREIGN KEY (branch_id) REFERENCES public.sucursal(id);


--
-- TOC entry 7189 (class 2606 OID 17739)
-- Name: devolucion_ventas fk_devolucion_usuario; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.devolucion_ventas
    ADD CONSTRAINT fk_devolucion_usuario FOREIGN KEY (usuario_id) REFERENCES public.usuario(id);


--
-- TOC entry 7196 (class 2606 OID 17776)
-- Name: devolucion_compras fk_devolucion_usuario; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.devolucion_compras
    ADD CONSTRAINT fk_devolucion_usuario FOREIGN KEY (usuario_id) REFERENCES public.usuario(id);


--
-- TOC entry 7190 (class 2606 OID 17729)
-- Name: devolucion_ventas fk_devolucion_venta; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.devolucion_ventas
    ADD CONSTRAINT fk_devolucion_venta FOREIGN KEY (venta_id) REFERENCES public.venta(id);


--
-- TOC entry 7178 (class 2606 OID 17621)
-- Name: historial_movimiento fk_historial_inventario; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.historial_movimiento
    ADD CONSTRAINT fk_historial_inventario FOREIGN KEY (inventario_sucursal_id) REFERENCES public.inventario_sucursal(id) ON DELETE CASCADE;


--
-- TOC entry 7175 (class 2606 OID 17516)
-- Name: inventario_sucursal fk_inv_producto; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.inventario_sucursal
    ADD CONSTRAINT fk_inv_producto FOREIGN KEY (product_id) REFERENCES public.producto(id);


--
-- TOC entry 7176 (class 2606 OID 17543)
-- Name: inventario_sucursal fk_inv_sucursal; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.inventario_sucursal
    ADD CONSTRAINT fk_inv_sucursal FOREIGN KEY (branch_id) REFERENCES public.sucursal(id);


--
-- TOC entry 7179 (class 2606 OID 17636)
-- Name: password_reset_token fk_password_reset_usuario; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.password_reset_token
    ADD CONSTRAINT fk_password_reset_usuario FOREIGN KEY (usuario_id) REFERENCES public.usuario(id);


--
-- TOC entry 7161 (class 2606 OID 17597)
-- Name: producto fk_product_branch; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.producto
    ADD CONSTRAINT fk_product_branch FOREIGN KEY (branch_id) REFERENCES public.sucursal(id);


--
-- TOC entry 7158 (class 2606 OID 17164)
-- Name: producto fk_product_business_type; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.producto
    ADD CONSTRAINT fk_product_business_type FOREIGN KEY (business_type_id) REFERENCES public.business_type(id);


--
-- TOC entry 7160 (class 2606 OID 17352)
-- Name: producto fk_product_category; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.producto
    ADD CONSTRAINT fk_product_category FOREIGN KEY (category_id) REFERENCES public.product_category(id);


--
-- TOC entry 7177 (class 2606 OID 17563)
-- Name: product_detail fk_product_detail_product; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.product_detail
    ADD CONSTRAINT fk_product_detail_product FOREIGN KEY (product_id) REFERENCES public.producto(id) ON DELETE CASCADE;


--
-- TOC entry 7159 (class 2606 OID 17188)
-- Name: producto fk_product_provider; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.producto
    ADD CONSTRAINT fk_product_provider FOREIGN KEY (provider_id) REFERENCES public.proveedor(id);


--
-- TOC entry 7186 (class 2606 OID 17709)
-- Name: proveedor_sucursal fk_proveedor; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.proveedor_sucursal
    ADD CONSTRAINT fk_proveedor FOREIGN KEY (proveedor_id) REFERENCES public.proveedor(id);


--
-- TOC entry 7187 (class 2606 OID 17714)
-- Name: proveedor_sucursal fk_sucursal; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.proveedor_sucursal
    ADD CONSTRAINT fk_sucursal FOREIGN KEY (sucursal_id) REFERENCES public.sucursal(id);


--
-- TOC entry 7174 (class 2606 OID 17592)
-- Name: sucursal fk_sucursal_business_type; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.sucursal
    ADD CONSTRAINT fk_sucursal_business_type FOREIGN KEY (business_type_id) REFERENCES public.business_type(id);


--
-- TOC entry 7156 (class 2606 OID 17587)
-- Name: usuario fk_usuario_branch; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.usuario
    ADD CONSTRAINT fk_usuario_branch FOREIGN KEY (branch_id) REFERENCES public.sucursal(id);


--
-- TOC entry 7168 (class 2606 OID 17013)
-- Name: venta fk_venta_cliente; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.venta
    ADD CONSTRAINT fk_venta_cliente FOREIGN KEY (cliente_id) REFERENCES public.cliente(id);


--
-- TOC entry 7169 (class 2606 OID 17538)
-- Name: venta fk_venta_sucursal; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.venta
    ADD CONSTRAINT fk_venta_sucursal FOREIGN KEY (branch_id) REFERENCES public.sucursal(id);


--
-- TOC entry 7167 (class 2606 OID 16985)
-- Name: venta fk_venta_usuario; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.venta
    ADD CONSTRAINT fk_venta_usuario FOREIGN KEY (usuario_id) REFERENCES public.usuario(id);


--
-- TOC entry 7184 (class 2606 OID 17691)
-- Name: inventario_farmacia inventario_farmacia_producto_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.inventario_farmacia
    ADD CONSTRAINT inventario_farmacia_producto_id_fkey FOREIGN KEY (producto_id) REFERENCES public.producto(id);


--
-- TOC entry 7185 (class 2606 OID 17696)
-- Name: inventario_farmacia inventario_farmacia_sucursal_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.inventario_farmacia
    ADD CONSTRAINT inventario_farmacia_sucursal_id_fkey FOREIGN KEY (sucursal_id) REFERENCES public.sucursal(id);


--
-- TOC entry 7157 (class 2606 OID 17159)
-- Name: producto producto_business_type_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.producto
    ADD CONSTRAINT producto_business_type_id_fkey FOREIGN KEY (business_type_id) REFERENCES public.business_type(id);


--
-- TOC entry 7180 (class 2606 OID 17670)
-- Name: producto_farmacia producto_farmacia_forma_farmaceutica_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.producto_farmacia
    ADD CONSTRAINT producto_farmacia_forma_farmaceutica_id_fkey FOREIGN KEY (forma_farmaceutica_id) REFERENCES public.forma_farmaceutica(id);


--
-- TOC entry 7181 (class 2606 OID 17680)
-- Name: producto_farmacia producto_farmacia_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.producto_farmacia
    ADD CONSTRAINT producto_farmacia_id_fkey FOREIGN KEY (id) REFERENCES public.producto(id);


--
-- TOC entry 7182 (class 2606 OID 17665)
-- Name: producto_farmacia producto_farmacia_principio_activo_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.producto_farmacia
    ADD CONSTRAINT producto_farmacia_principio_activo_id_fkey FOREIGN KEY (principio_activo_id) REFERENCES public.principio_activo(id);


--
-- TOC entry 7183 (class 2606 OID 17675)
-- Name: producto_farmacia producto_farmacia_unidad_medida_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.producto_farmacia
    ADD CONSTRAINT producto_farmacia_unidad_medida_id_fkey FOREIGN KEY (unidad_medida_id) REFERENCES public.unidad_medida(id);


--
-- TOC entry 7170 (class 2606 OID 17577)
-- Name: venta venta_payment_method_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: enterprisedb
--

ALTER TABLE ONLY public.venta
    ADD CONSTRAINT venta_payment_method_id_fkey FOREIGN KEY (payment_method_id) REFERENCES public.metodo_pago(id);


-- Completed on 2025-08-20 11:25:04

--
-- EnterpriseDB database dump complete
--

